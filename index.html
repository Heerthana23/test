<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Spendify Mobile ‚Äî LKR</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app" class="app">
    <!-- Decorative SVG blobs (absolute background) -->
    <svg class="bg-blob left" viewBox="0 0 400 400" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#7c3aed"/><stop offset="1" stop-color="#06b6d4"/></linearGradient>
      </defs>
      <path d="M120 20 C170 -30 320 10 340 90 C360 170 300 240 240 270 C180 300 90 320 50 250 C10 180 30 70 120 20Z" fill="url(#g1)" opacity="0.12"/>
    </svg>

    <svg class="bg-blob right" viewBox="0 0 400 400" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#ff7a59"/><stop offset="1" stop-color="#ffb86b"/></linearGradient>
      </defs>
      <path d="M300 80 C360 20 420 60 380 140 C340 220 300 300 230 320 C160 340 90 300 70 230 C50 160 120 120 200 100 C260 88 300 80 300 80Z" fill="url(#g2)" opacity="0.10"/>
    </svg>

    <!-- Mobile overlay (for off-canvas menu) -->
    <div id="overlay" class="overlay hidden" aria-hidden="true"></div>

    <!-- Off-canvas sidebar (burger menu) -->
    <aside id="sidebar" class="sidebar" aria-hidden="true">
      <div class="sidebar-top">
        <div class="brand">
          <div class="logo">üí∏</div>
          <div>
            <div class="brand-title">Spendify</div>
            <div class="brand-sub muted">LKR ‚Ä¢ Mobile</div>
          </div>
        </div>
        <div class="profile-hero">
          <div class="profile-blob"></div>
          <div class="profile-name" id="sidebarUser">You</div>
          <div class="profile-small muted" id="sidebarEmail">guest</div>
        </div>
      </div>

      <nav class="nav" role="navigation" aria-label="Main navigation">
        <button class="nav-btn" data-route="dashboard">üè† Dashboard</button>
        <button class="nav-btn" data-route="add">‚ûï Add</button>
        <button class="nav-btn" data-route="history">üìú History</button>
        <button class="nav-btn" data-route="categories">üìä Categories</button>
        <button class="nav-btn" data-route="settings">‚öôÔ∏è Settings</button>
        <button class="nav-btn" data-route="about">‚ùì Help</button>
      </nav>

      <div class="sidebar-bottom">
        <div class="footer-actions">
          <button id="demoData" class="btn small ghost">Load Demo</button>
          <button id="logoutBtn" class="btn small">Logout</button>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main" role="main">
      <!-- Top bar -->
      <header class="topbar">
        <button id="burgerBtn" class="burger" aria-label="Open menu" aria-expanded="false">‚ò∞</button>
        <div class="title-wrap">
          <div id="pageTitle" class="page-title">Dashboard</div>
          <div id="pageSubtitle" class="muted small">Overview</div>
        </div>
        <div class="profile-pill" id="profilePill">üë§ <span id="userName">You</span></div>
      </header>

      <!-- AUTH / LOGIN VIEW -->
      <section id="loginView" class="view center">
        <div class="card auth-card glass">
          <div class="auth-hero">
            <svg viewBox="0 0 100 40" class="logo-mark" aria-hidden="true">
              <defs>
                <linearGradient id="m1" x1="0" x2="1"><stop offset="0" stop-color="#06b6d4"/><stop offset="1" stop-color="#7c3aed"/></linearGradient>
              </defs>
              <rect x="0" y="0" width="40" height="40" rx="8" fill="url(#m1)"></rect>
              <text x="52" y="26" font-size="12" fill="#072033" font-weight="700">Spendify</text>
            </svg>
          </div>

          <h2 class="auth-title">Welcome</h2>
          <p class="muted small">Sign in to track expenses ‚Äî all data stays on your device.</p>

          <form id="loginForm" class="auth-form" novalidate>
            <div class="f-row">
              <label class="f-label" for="loginEmail">Email</label>
              <input id="loginEmail" name="email" type="email" inputmode="email" placeholder="you@example.com" required />
              <div class="error" id="errEmail"></div>
            </div>

            <div class="f-row">
              <label class="f-label" for="loginPassword">Password</label>
              <input id="loginPassword" name="password" type="password" placeholder="Min 6 characters" required minlength="6" />
              <div class="error" id="errPassword"></div>
            </div>

            <div class="f-row small-row between">
              <label class="checkbox">
                <input id="remember" type="checkbox" />
                <span>Remember me</span>
              </label>
              <button id="showSignup" type="button" class="btn ghost small">Create account</button>
            </div>

            <div class="f-row actions">
              <button id="loginBtn" class="btn primary">Sign in</button>
            </div>
          </form>

          <div class="tip muted small">Demo account: <strong>demo@local</strong> / <strong>password</strong></div>
        </div>

        <!-- Signup card (overlay beneath login) -->
        <div id="signupCard" class="card auth-card glass hidden">
          <h3>Create account</h3>
          <form id="signupForm" novalidate>
            <div class="f-row">
              <label class="f-label" for="signupName">Name</label>
              <input id="signupName" type="text" placeholder="Your name" required />
              <div class="error" id="errName"></div>
            </div>

            <div class="f-row">
              <label class="f-label" for="signupEmail">Email</label>
              <input id="signupEmail" type="email" placeholder="you@example.com" required />
              <div class="error" id="errSignupEmail"></div>
            </div>

            <div class="f-row">
              <label class="f-label" for="signupPassword">Password</label>
              <input id="signupPassword" type="password" placeholder="Min 6 characters" required minlength="6" />
              <div class="error" id="errSignupPassword"></div>
            </div>

            <div class="f-row actions">
              <button id="createBtn" class="btn primary">Create account</button>
              <button id="cancelSignup" type="button" class="btn ghost">Back</button>
            </div>
          </form>
        </div>
      </section>

      <!-- APP VIEWS (hidden until authenticated) -->
      <section id="appView" class="view hidden">
        <!-- Dashboard -->
        <div id="dashboard" class="screen">
          <div class="card hero glass">
            <div class="hero-left">
              <div class="label small muted">Balance</div>
              <div id="balance" class="big animated-number">LKR 0.00</div>
              <div class="muted small">Income ‚Ä¢ Expenses</div>
            </div>
            <div class="hero-right">
              <div class="mini income glass-2">
                <div class="label small muted">Income</div>
                <div id="income" class="value animated-number">LKR 0.00</div>
              </div>
              <div class="mini expense glass-2">
                <div class="label small muted">Expenses</div>
                <div id="expense" class="value animated-number">LKR 0.00</div>
              </div>
            </div>
            <div class="sparkles" aria-hidden="true">
              <span class="s1"></span><span class="s2"></span><span class="s3"></span>
            </div>
          </div>

          <div class="card glass">
            <div class="section-title">Recent</div>
            <ul id="recentList" class="txn-list"></ul>
          </div>

          <div class="card small-note glass muted">All data stays on your device (localStorage). Currency: LKR</div>
        </div>

        <!-- Add -->
        <div id="add" class="screen hidden">
          <div class="card glass">
            <div class="section-title">Add Expense / Income</div>

            <form id="txnForm" novalidate>
              <input type="hidden" id="editingId" value="" />

              <div class="f-row type-row">
                <button type="button" class="type-btn active" data-val="expense">Expense</button>
                <button type="button" class="type-btn" data-val="income">Income</button>
              </div>

              <div class="f-row">
                <label class="f-label" for="description">Description</label>
                <input id="description" type="text" placeholder="e.g., Grocery" required />
                <div class="error" id="errDesc"></div>
              </div>

              <div class="f-row two">
                <div>
                  <label class="f-label" for="amount">Amount (LKR)</label>
                  <input id="amount" type="number" inputmode="decimal" step="0.01" placeholder="0.00" required />
                  <div class="error" id="errAmt"></div>
                </div>
                <div>
                  <label class="f-label" for="category">Category</label>
                  <select id="category">
                    <option value="">Choose</option>
                    <option>Food</option>
                    <option>Transport</option>
                    <option>Rent</option>
                    <option>Utilities</option>
                    <option>Entertainment</option>
                    <option>Salary</option>
                    <option>Other</option>
                  </select>
                  <div class="error" id="errCat"></div>
                </div>
              </div>

              <div class="f-row">
                <label class="f-label" for="date">Date</label>
                <input id="date" type="date" />
                <div class="error" id="errDate"></div>
              </div>

              <div class="f-row actions">
                <button id="submitTxn" class="btn primary">Save</button>
                <button id="cancelTxn" type="button" class="btn ghost">Cancel</button>
              </div>
            </form>
          </div>
        </div>

        <!-- History -->
        <div id="history" class="screen hidden">
          <div class="card glass">
            <div class="section-title">History</div>
            <div class="filters-row">
              <input id="search" type="search" placeholder="Search" />
              <select id="filterCategory">
                <option value="">All</option>
              </select>
            </div>
            <ul id="historyList" class="txn-list"></ul>
          </div>
        </div>

        <!-- Categories -->
        <div id="categories" class="screen hidden">
          <div class="card glass">
            <div class="section-title">Categories</div>
            <ul id="catList" class="insights"></ul>
          </div>
        </div>

        <!-- Settings -->
        <div id="settings" class="screen hidden">
          <div class="card glass">
            <div class="section-title">Settings</div>
            <div class="f-row">
              <label class="f-label">Display name</label>
              <input id="profileName" type="text" />
            </div>
            <div class="f-row actions">
              <button id="saveSettings" class="btn primary">Save</button>
              <button id="exportBtn" class="btn ghost">Export JSON</button>
              <button id="clearBtn" class="btn ghost">Clear all data</button>
            </div>
          </div>
        </div>

        <!-- About -->
        <div id="about" class="screen hidden">
          <div class="card glass">
            <div class="section-title">Help & About</div>
            <p class="muted small">Spendify mobile demo ‚Äî data stored locally (no server). Login required to use app features.</p>
          </div>
        </div>
      </section>

      <!-- Bottom nav (mobile) -->
      <nav class="bottom-nav" aria-label="Primary">
        <button class="tab-btn" data-route="dashboard">üè†</button>
        <button class="tab-btn" data-route="add">‚ûï</button>
        <button class="tab-btn" data-route="history">üìú</button>
        <button class="tab-btn" data-route="categories">üìä</button>
        <button class="tab-btn" data-route="settings">‚öôÔ∏è</button>
      </nav>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>